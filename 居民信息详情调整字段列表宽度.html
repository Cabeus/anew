<!DOCTYPE html>


<html lang="zh-CN">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="x-ua-compatible" content="ie=edge">

		<link href="http://testapi.zxwave.com/besafe/manager/static/image/favicon.png" rel="shortcut icon">
		<link rel="stylesheet" href="http://testapi.zxwave.com/besafe/manager/static/anew/css/lib/bootstrap.min.css?v=20171109">
		<link rel="stylesheet" href="http://testapi.zxwave.com/besafe/manager/static/anew/css/fonts/css/font-awesome.min.css?v=20171109">

		<link rel="stylesheet" type="text/css" href="http://testapi.zxwave.com/besafe/manager/static/region/css/main.css">

		<link type="text/css" href="http://testapi.zxwave.com/besafe/manager/static/Validate/validationEngine.jquery.css" rel="stylesheet">

		<link rel="stylesheet" href="http://testapi.zxwave.com/besafe/manager/static/extend/bootstrap-table/bootstrap-table.min.css">
		<!-- bootstrap-table -->
		<link rel="stylesheet" href="http://testapi.zxwave.com/besafe/manager/static/css/multiselect/bootstrap-multiselect.css">
		<!-- multiselect -->
		<link rel="stylesheet" href="http://testapi.zxwave.com/besafe/manager/static/package/analysis/app.css?v=20171109">

		<link rel="stylesheet" href="http://testapi.zxwave.com/besafe/manager/static/anew/css/app.css?v=20171109">
		<link rel="stylesheet" href="http://testapi.zxwave.com/besafe/manager/static/anew/css/global.css?v=20171109">

		<title>长安一家亲智慧网格信息化平台</title>
		<style>
			body {
				background: rgb(54, 59, 71);
			}
			
			.fixed-table-body {
				background: #464C5B;
			}
			
			.fixed-table-container {
				border: 1px solid #635F77 !important;
				border-radius: 0px;
				-webkit-border-radius: 0px;
				-moz-border-radius: 0px;
			}
			
			.fixed-table-container thead th {
				border-left: 0px;
			}
			
			.fixed-table-container tbody td {
				border-left: 0px;
			}
			
			.fixed-table-container td {
				border-bottom: 1px solid #635F77 !important;
			}
			
			.fixed-table-container thead tr:hover {
				color: #FFF;
			}
			
			.fixed-table-container tr:hover {
				background: #eee;
				color: #000;
			}
			
			.fixed-table-container th {
				border-bottom: 1px solid #635F77 !important;
				font-weight: normal;
				background-color: #3B4754;
				text-align: center;
			}
			
			.one,
			.two {
				display: flex;
				justify-content: space-around;
				flex-wrap: wrap;
			}
			
			.img {
				width: 100px;
				height: 100px;
				margin-top: 15px;
				margin-bottom: 15px;
				text-align: center;
			}
			
			.img>img {
				width: 80px;
				margin: 0 auto 10px;
			}
			
			.box {
				background-color: #F8F8FF;
				color: black;
				border: 1px solid black;
				/* 设置阴影 */
				-webkit-box-shadow: 1px 1px 3px #292929;
				-moz-box-shadow: 1px 1px 3px #292929;
				box-shadow: 1px 1px 3px #292929;
			}
			/*列表hover样式*/
			
			.fixed-table-container tr:hover {
				background: #3f4251 !important;
				color: #fff;
			}
			
			.table-bordered td {
				border: 1px solid #635F77 !important;
			}
			
			th {
				text-align: left !important;
			}
			
			#table-household th {
				color: #fff;
			}
			
			.table-bordered th {
				border: 1px solid #635F77 !important;
				font-weight: normal;
				background-color: #3B4754;
				text-align: center;
			}
			
			.nav-pills>li {
				background: #2D323E;
			}
			
			.nav-pills>li:focus,
			.nav-pills>li:hover {
				color: #fff !important;
				background-color: #9974D2;
			}
			
			.nav-pills>li.active,
			.nav-pills>li.active:focus,
			.nav-pills>li.active:hover {
				color: #fff !important;
				background-color: #9974D2;
			}
			
			.nav-pills>li.active>a,
			.nav-pills>li.active>a:focus,
			.nav-pills>li.active>a:hover {
				color: #fff !important;
				background-color: #9974D2;
			}
			
			.nav-justified {
				border-radius: 4px;
				overflow: hidden;
			}
			
			.nav-justified>li>a {
				color: #fff !important;
			}
			
			.nav-justified>li>a:focus,
			.nav-justified>li>a:hover {
				background-color: #9974D2;
				color: #fff !important;
			}
			
			#from-query>.col-xs-3>.form-group {
				width: 100%;
				margin-bottom: 10px;
			}
			
			#from-query>.col-xs-3>.form-group>label {
				display: inline-block;
				width: 30%;
				text-align: right;
			}
			
			#from-query>.col-xs-3>.form-group>input {
				display: inline-block;
				height: 28px;
				width: 60%;
			}
			
			#from-query>.col-xs-3>.form-group>.btn-group {
				width: 60%;
			}
			
			#from-query>.col-xs-3>.form-group>.btn-group>button {
				padding: 3px 15px;
				width: 100%;
			}
			
			#from-query>.col-xs-3>.form-group>.btn-group>button>span {
				float: left;
			}
			
			#from-query>.col-xs-3>.form-group>.btn-group>button>b {
				float: right;
				margin-top: 8px;
			}
			
			.instructions:link,
			.instructions:hover,
			.instructions:active,
			.instructions:visited,
			.instructions:focus {
				color: #ffffff;
			}
			
			.fixed-table-loading {
				background: rgba(54, 59, 71, 1);
			}
		</style>
		<script>
			var code = "6612";
			var ctx = "http://testapi.zxwave.com/besafe/manager";
		</script>
	</head>

	<body style="overflow:auto">
		<div class="container-fluid">
			<div class="row">

				<!-- header -->
				<div class="header col-md-12">
					<!--名称-->
					<div class="header-title">
						<a href="#" id="regionName_">网格八</a>

						<!--返回-->
						<a class="back" style="display:none" href="#" id="backjump"><img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/map_page_back.png" /></a>
					</div>

					<!--板块-->
					<div class="nav-center">
						<ul>

							<li class="li-home">
								<a href="http://testapi.zxwave.com/besafe/manager/index/loginMap">
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/index.png" />
									<span>首页</span>
								</a>
							</li>

							<li class="li-command">
								<a id="command-default" class="command-default" href="http://testapi.zxwave.com/besafe/manager/index/command?currentRegionId=195">
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-command.png" />
									<span>应急指挥</span>
								</a>
								<a class="command-out" style="display: none;" href="#">
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-command.png" />
									<span>退出指挥</span>
								</a>

							</li>

							<li class="li-statistics">
								<a id="statistics-default" href="http://testapi.zxwave.com/besafe/manager/index/login">
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-data.png" />
									<span>数据平台</span>
								</a>
							</li>

							<li class="li-wisdom">
								<a href="http://testapi.zxwave.com/besafe/manager/info/local">
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-application.png" />
									<span>智慧应用</span>
								</a>
							</li>

						</ul>
					</div>

					<!--功能-->
					<div class="nav-right">
						<ul class="navbar-nav">

							<li class="common">
								<a href="#">
									<span>&nbsp;</span>
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-menu.png" />
									<span>&nbsp;</span>
								</a>
								<div class="common-box shadow-2dp">
									<ul>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/info/notification">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-notice.png" />
												<span>通知公告</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/task/list">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-Clue.png" />
												<span>任务管理</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/patrol/patrollist/1">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-help.png" />
												<span>巡逻轨迹</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/feedback/listPage">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-task.png" />
												<span>线索管理</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/rescueRequest/list">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-help.png" />
												<span>求助信息</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/benefit/web110">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-110.png" />
												<span>智慧报警110</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/camera/online">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-Monitor.png" />
												<span>在线监控</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/region/listPage">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-grid.png" />
												<span>网格管理</span>
											</a>
										</li>

										<li>
											<a href="http://testapi.zxwave.com/besafe/manager/organization/list">
												<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-organization.png" />
												<span>组织架构管理</span>
											</a>
										</li>

									</ul>
								</div>
							</li>

							<li class="setup">
								<a href="http://testapi.zxwave.com/besafe/manager/user/list">
									<span>&nbsp;</span>
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-system.png" />
									<span>&nbsp;</span>
								</a>
							</li>

							<li class="message">
								<a href="#">
									<b>&nbsp;</b>
									<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-remind.png" />
									<span class="header_message_num" style="display: none;">0</span>
									<b>&nbsp;</b>
								</a>
								<!--消息提示框-->
								<div class="message-box  shadow-2dp">
									<h4>消息提示<span class="empty-all">全部清空</span></h4>
									<ul class="header_message">

									</ul>
								</div>
							</li>
						</ul>
					</div>

					<!--用户-->
					<div class="admin dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<img src="http://testapi.zxwave.com/besafe/manager/static/anew/img/icon-header-head.png" />
							<span>管理员，</span>
						</a>
						<ul class="dropdown-menu">
							<li>
								<a href="#" onclick="$('#modal-change-password').modal('toggle');"><i class="fa fa-key fa-fw"></i>&nbsp;密码变更</a>
							</li>
						</ul>
						<a class="out" href="http://testapi.zxwave.com/besafe/manager/logout" onclick="sessionStorage.login = 0;">退出</a>
					</div>

				</div>
				<!--header end -->
				<!-- 密码变更窗口 -->
				<div class="modal fade" id="modal-change-password">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								<h4 class="modal-title">变更密码</h4>
							</div>
							<div class="modal-body">
								<form id="form-change-password" class="form-horizontal" role="form">
									<div class="form-group">
										<label class="col-sm-3 control-label">原密码：</label>
										<div class="col-sm-7">
											<input type="password" class="form-control" name="original" placeholder="">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">新密码：</label>
										<div class="col-sm-7">
											<input type="password" class="form-control" name="newPassword" placeholder="">
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label">再次输入：</label>
										<div class="col-sm-7">
											<input type="password" class="form-control" name="repeat" placeholder="">
										</div>
									</div>
								</form>
							</div>
							<!-- /.modal-body -->
							<div class="modal-footer">
								<button type="button" class="btn btn-primary" onclick="changeMyPassword();"><i class="fa fa-save"></i>
                    保存
                </button>
								<button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> 关闭
                </button>
							</div>
						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>
				<!-- /.modal -->

				<div class="col-md-4" style="margin-top: 15px;">

					<!-- 综合数据表 -->
					<table id="table-base" class="table table-bordered" style="color: #ffffff;background-color: #3D4351;">
						<!-- 表头 -->
						<tr>
							<td colspan="4" style="font-family: Helvetica-Bold;font-size: 24px;color: #FDA183;">
								<span style="float:left">概况</span>

								<div style="float:right">
									<span style="font-family: Helvetica-Bold;font-size: 16px;color: #FDA183;margin-right:20px;line-height: 32px;">负责人：</span>
									<span style="font-family: Helvetica-Bold;font-size: 16px;color: #FDA183;line-height: 32px;">电话号码：</span>
								</div>

							</td>
						</tr>
						<!-- 第一行 -->
						<tr>
							<td rowspan="3">总户数</td>
							<td rowspan="3" align="right">131</td>
							<td>出租户数</td>
							<td align="right">8</td>
						</tr>
						<tr>
							<td>商户数</td>
							<td align="right">26</td>
						</tr>
						<tr>
							<td>暂口户数</td>
							<td align="right">43</td>
						</tr>
						<!-- 第二行 -->
						<tr>
							<td rowspan="8">总人口数</td>
							<td rowspan="8" align="right">314</td>
							<td>暂口人数</td>
							<td align="right">104</td>
						</tr>
						<tr>
							<td>汉族人口数</td>
							<td align="right">263</td>
						</tr>
						<tr>
							<td>维族人数</td>
							<td align="right">6</td>
						</tr>
						<tr>
							<td>外籍人数</td>
							<td align="right">0</td>
						</tr>
						<tr>
							<td>流入暂口数</td>
							<td align="right">52</td>
						</tr>
						<tr>
							<td>安装软件人数</td>
							<td align="right">26</td>
						</tr>
						<tr>
							<td>软件联保人数</td>
							<td align="right">26</td>
						</tr>
						<tr>
							<td>硬件联保户数</td>
							<td align="right">0</td>
						</tr>
						<!-- 第三行 -->
						<tr>
							<td rowspan="2">任务总数量</td>
							<td rowspan="2" align="right">4</td>
							<td>完成数量</td>
							<td align="right">4</td>
						</tr>
						<tr>
							<td>未完成数量</td>
							<td align="right">0</td>
						</tr>
						<!-- 第四行 -->
						<tr>
							<td rowspan="2">线索总数量</td>
							<td rowspan="2" align="right">2</td>
							<td>解决数量</td>
							<td align="right">2</td>
						</tr>
						<tr>
							<td>未解决数量</td>
							<td align="right">0</td>
						</tr>
					</table>
					<div align="center">
						<button type="button" class="btn btn-success" onclick="print('table-base');"><i class="fa fa-print"></i>
                    打印
                </button>
						<button type="button" class="btn" onclick="ExportExcel('table-base')" style="margin-left:20px;background-color:#FF906C;color:#ffffff">导出
                </button>
					</div>

					<div class="item shadow-2d">
						<div class="one">
							<div class="img"><img class="img-responsive" src="http://testapi.zxwave.com/besafe/manager/static/image/platforms/bingdi.png" />兵地人口信息
							</div>
							<div class="img"><img class="img-responsive" src="http://testapi.zxwave.com/besafe/manager/static/image/platforms/shiershi.png" />十二师信息平台
							</div>
							<div class="img"><img class="img-responsive" src="http://testapi.zxwave.com/besafe/manager/static/image/platforms/erweima.png" />二维码信息
							</div>
						</div>

						<div class="one">
							<div class="img"><img class="img-responsive" src="http://testapi.zxwave.com/besafe/manager/static/image/platforms/jingzong.png" />警综系统
							</div>
							<div class="img"><img class="img-responsive" src="http://testapi.zxwave.com/besafe/manager/static/image/platforms/jisheng.png" />计生PADIS系统
							</div>
							<div class="img"><img class="img-responsive" src="http://testapi.zxwave.com/besafe/manager/static/image/platforms/canlian.png" />民政残联信息
							</div>
						</div>
					</div>

				</div>

				<div class="col-md-8">
					<div class="item">

						<p style="font-size: 20px;margin: 15px 0 10px 0;">居民主要信息</p>
						<form id="from-query" class="form-inline" role="form">

							<div class="col-xs-3">
								<div class="form-group">
									<label>关键字&nbsp;</label>
									<input class="form-control" type="text" name="keyword" value="">
								</div>
								<div class="clearfix"></div>
								<div class="form-group">
									<label>民族&nbsp;</label>
									<input class="form-control" type="text" name="ethnicity" value="">
								</div>
								<div class="clearfix"></div>
								<div class="form-group">
									<label>工作状态&nbsp;</label>
									<select class="form-multiselect" name="s3">
										<option value="" selected>全部</option>
										<option value="已就业">已就业</option>
										<option value="未就业">未就业</option>
									</select>
								</div>
							</div>
							<div class="col-xs-3">
								<div class="form-group">
									<label>性别&nbsp;</label>
									<select class="form-multiselect" name="gender">
										<option value="" selected>全部</option>
										<option value="1">男</option>
										<option value="0">女</option>
									</select>
								</div>
								<div class="form-group">
									<label>户籍&nbsp;</label>
									<input class="form-control" type="text" name="householdAddress" value="">
								</div>
								<div class="form-group">
									<label>人户状况&nbsp;</label>
									<select name="residentStatus" class="form-multiselect">
										<option value="" selected>全部</option>
										<option value="常住，户不在">常住，户不在</option>
										<option value="常住，户在">常住，户在</option>
										<option value="暂住，户不在">暂住，户不在</option>
										<option value="不住，户在">不住，户在</option>
									</select>
								</div>
							</div>
							<div class="col-xs-3">
								<div class="form-group">
									<label>身份证号&nbsp;</label>
									<input class="form-control" type="text" name="identityNumber" value="">
								</div>
								<div class="form-group">
									<label>人口类别</label>
									<select class="form-multiselect" name="s12">
										<option value="" selected>全部</option>
										<option value="普通关注">普通关注</option>
										<option value="重点关注">重点关注</option>
										<option value="特殊关注">特殊关注</option>
									</select>
								</div>

							</div>
							<div class="col-xs-3">
								<div class="form-group">
									<label>住址区域&nbsp;</label>
									<input class="form-control" type="text" name="residentAddress">
								</div>
								<div class="form-group">
									<label>婚姻状态&nbsp;</label>
									<select class="form-multiselect" name="marriage">
										<option value="" selected>全部</option>
										<option value="未婚">未婚</option>
										<option value="初婚">初婚</option>
										<option value="离婚">离婚</option>
										<option value="复婚">复婚</option>
										<option value="丧偶">丧偶</option>
										<option value="再婚">再婚</option>
										<option value="其他">其他</option>

									</select>
								</div>

							</div>
							<!-- 清除浮动 -->
							<div class="clearfix"></div>
							<div style="margin-left: 6%;">
								<button type="button" class="btn btn-sm" onclick="$('#table').bootstrapTable('refresh');" style="margin-left:30px;background-color:#FF906C;color:#ffffff;font-size: 14px;padding:4px 20px;">
                            搜索
                        </button>
								<button type="button" class="btn btn-link" onclick="window.location.href='http://testapi.zxwave.com/besafe/manager/index/login'" style="margin-left:10px;font-size: 14px;padding:4px 20px;color: #06B3F6;">清空筛选项
                        </button>
							</div>
						</form>
						<table id="table"></table>
						<div align="center" style="margin-top: 20px;">
							<button type="button" class="btn btn-success" onclick="print('table');"><i class="fa fa-print"></i>
                        打印
                    </button>
							<button type="button" onclick="$('#modal-export').modal('toggle');" class="btn" style="margin-left:20px;background-color:#FF906C;color:#ffffff">
                        导出
                    </button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- 导出用户数据窗口 -->
		<div class="modal fade" id="modal-export">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title">导出用户数据</h4>
					</div>
					<div class="modal-body">
						<form class="form-horizontal" role="form" method="POST" action="http://testapi.zxwave.com/besafe/manager/resident/excel" target="uploadframe1">
							<div class="form-group">
								<div style="margin-left:30px;">
									<button type="submit" class="btn btn-primary" title="下载" id="dodow"><i
                                    class="fa fa-download"></i></button><span style="color:#000;padding-left: 25px">数据已准备完毕，点击下载！</span>
								</div>
							</div>
						</form>

					</div>
					<!-- /.modal-body -->
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> 关闭
                </button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<!-- /.modal -->

		<!-- 展示的模态框 -->
		<div class="modal fade" id="modal-view">
			<div class="modal-dialog modal-lg" style="width:70%">
				<div class="modal-content" style="padding:20px;">
					<div class="modal-header" style="border: 0;color: #000;">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title">居民信息</h4>
					</div>
					<div class="modal-body">
						<!-- Nav tabs -->
						<ul class="nav nav-pills nav-justified" role="tablist" style="background: #2D323E;border-radius: 5px;">
							<li role="presentation" class="active">
								<a href="#home" aria-controls="home" role="tab" data-toggle="tab">基本信息</a>
							</li>
							<li role="presentation">
								<a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">家庭信息</a>
							</li>
							<li role="presentation">
								<a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">子女信息</a>
							</li>
							<li role="presentation">
								<a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">避孕信息</a>
							</li>
							<li role="presentation">
								<a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">妊娠信息</a>
							</li>
							<li role="presentation">
								<a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">领证信息</a>
							</li>
							<li role="presentation">
								<a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">节育手术</a>
							</li>
						</ul>

						<div class="tab-content" style="color:#000">
							<div role="tabpanel" class="tab-pane fade in active" id="home">
								<table style="width: 100%; margin-top:10px;" id="table-resident-info" class=" table table-bordered table-hover"></table>
							</div>
							<div role="tabpanel" class="tab-pane fade" id="profile">
								<table style="width: 100%; margin-top:10px;" id="table-household" class="table table-bordered table-hover"></table>
							</div>
							<div role="tabpanel" class="tab-pane fade" id="messages"></div>
							<div role="tabpanel" class="tab-pane fade" id="settings"></div>
						</div>
					</div>
					<!-- /.modal-body -->
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> 关闭
                </button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
			<audio id="playmp3" src="http://testapi.zxwave.com/besafe/manager/static/rescue/sound.mp3" controls="controls" loop="false" hidden="true"></audio>
		</div>
		<!-- /.modal -->

		<script src="http://testapi.zxwave.com/besafe/manager/static/js/jquery.min.js"></script>
		<script src="http://testapi.zxwave.com/besafe/manager/static/js/bootstrap.min.js"></script>

		<script src="http://testapi.zxwave.com/besafe/manager/static/js/multiselect/bootstrap-multiselect.js"></script>

		<script src="http://testapi.zxwave.com/besafe/manager/static/extend/bootstrap-table/bootstrap-table.min.js"></script>
		<script src="http://testapi.zxwave.com/besafe/manager/static/extend/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>

		<script type="text/javascript" charset="utf-8" src="http://testapi.zxwave.com/besafe/manager/static/Validate/jquery.validationEngine.js"></script>
		<script type="text/javascript" charset="utf-8" src="http://testapi.zxwave.com/besafe/manager/static/Validate/jquery.validationEngine-zh_CN.js"></script>

		<script type="text/javascript" src="http://testapi.zxwave.com/besafe/manager/static/js/multiselect/bootstrap-multiselect.js"></script>

		<script type="text/javascript">
			var webSocket_cts = 'ws://testapi.zxwave.com/besafe/backend';
			var ctx = 'http://testapi.zxwave.com/besafe/manager';
			var webSocket_code = '6612';
			var adminIsTrue = true;
		</script>
		<script type="text/javascript" src="http://testapi.zxwave.com/besafe/manager/static/js/webSocket.js?v=20171109"></script>
		<script type="text/javascript" src="http://testapi.zxwave.com/besafe/manager/static/anew/js/app.js?v=20171109"></script>
		<script type="text/javascript" src="http://testapi.zxwave.com/besafe/manager/static/anew/js/newapp.js?v=20171109"></script>

		<script type="text/javascript">
			$('#dodow').click(function() {
				$('#modal-export').modal('hide');
			});
			$(document).ready(function() {
				$('.form-multiselect').multiselect();
				$('#backjump').show();
			});

			$('#backjump').click(function(event) {
				event.preventDefault();
				window.location.href = 'http://testapi.zxwave.com/besafe/manager/index/loginMap?currentRegionId=134';
			});

			var curPageNumber;
			var curPageSize;

			$('#table').bootstrapTable({
				url: 'http://testapi.zxwave.com/besafe/manager/user/resident',
				uniqueId: "id",
				showColumns: true,
				showRefresh: true,
				showToggle: true,
				pagination: true,
				sidePagination: 'server',
				pageSize: 10, //每页显示的记录数
				pageNumber: 1, //当前第几页
				pageList: [10, 25, 50, 100], //记录数可选列表
				queryParamsType: "undefined",
				method: 'post',
				dataType: 'json',
				responseHandler: function(res) {
					if(res.total != 0) {
						return {
							"rows": res.rows,
							"total": res.total
						};
					} else {
						return {
							"rows": [],
							"total": 0
						};
					}
				},
				queryParams: function(qps) {
					curPageNumber = qps.pageNumber;
					curPageSize = qps.pageSize;

					var paramArray = $("#from-query").serializeArray();
					var params = {
						pageNumber: curPageNumber,
						pageSize: curPageSize
					};
					for(var i = 0; i < paramArray.length; i++) {
						var param = paramArray[i];
						params[param.name] = param.value;
					}
					return params;
				},
				onClickCell: function(field, value, row, element) {
					initView(row);
					$('#modal-view').modal('toggle');
				},
				columns: [{
					field: 'id',
					title: 'ID',
					visible: false
				}, {
					field: 'name',
					title: '姓名'
				}, {
					field: 'ethnicity',
					title: '民族'
				}, {
					field: 'birthday',
					title: '出生日期'
				}, {
					field: 'residentStatus',
					title: '人户状况'
				}, {
					field: 'detailAddress',
					title: '详细住址'
				}, {
					field: 'residentAddress',
					title: '居住地'
				}, {
					field: 'householdAddress',
					title: '户籍地'
				}, {
					field: 'identityNumber',
					title: '身份证',
					visible: false
				}, {
					field: 'educationLevel',
					title: '文化程度',
					visible: false
				}, {
					field: 'career',
					title: '职业',
					visible: false
				}, {
					field: 'relHouseholder',
					title: '与户主关系',
					visible: false
				}, {
					field: 'marriage',
					title: '婚姻状况',
					visible: false
				}, {
					field: 'householdNumber',
					title: '户编号',
					visible: false
				}]
			});

			function initView(row) {

				var genderDesc = row.gender = 1 ? '男' : '女';

				$('#table-resident-info').empty();
				$('#table-resident-info').append('<tr><td>姓名</td><td colspan="3">' + row.name + '</td></tr>');
				$('#table-resident-info').append('<tr><td>户编码</td><td>' + row.householdNumber + '</td><td>政治面貌</td><td>' + row.politicalStatus + '</td></tr>');
				$('#table-resident-info').append('<tr><td>地址编码</td><td>' + row.addressNumber + '</td><td>户口性质</td><td>' + row.householdProperty + '</td></tr>');
				$('#table-resident-info').append('<tr><td>详细住址</td><td>' + row.detailAddress + '</td><td>户口类别</td><td>' + row.householdCategory + '</td></tr>');
				$('#table-resident-info').append('<tr><td>证件号码</td><td>' + row.identityNumber + '</td><td>身份类别</td><td>' + row.identityCategory + '</td></tr>');
				$('#table-resident-info').append('<tr><td>性别</td><td>' + genderDesc + '</td><td>婚姻状况</td><td>' + row.marriage + '</td></tr>');
				$('#table-resident-info').append('<tr><td>出生日期</td><td>' + row.birthday + '</td><td>与户主关系</td><td>' + row.relHouseholder + '</td></tr>');
				$('#table-resident-info').append('<tr><td>民族</td><td>' + row.ethnicity + '</td><td>人户状况</td><td>' + row.residentStatus + '</td></tr>');
				$('#table-resident-info').append('<tr><td>文化程度</td><td>' + row.educationLevel + '</td><td>户籍地</td><td>' + row.householdAddress + '</td></tr>');
				$('#table-resident-info').append('<tr><td>职业</td><td>' + row.career + '</td><td>居住地</td><td>' + row.residentAddress + '</td></tr>');
				$('#table-resident-info').append('<tr><td>工作单位</td><td>' + row.workingUnit + '</td><td>电话</td><td>' + row.telePhone + '</td></tr>');

				$.ajax({
					type: 'POST',
					url: 'http://testapi.zxwave.com/besafe/manager' + '/resident/household/' + row.householdNumber,
					dataType: 'json',
					success: function(list) {
						$("#table-household").empty();
						$("#table-household").append("<tr><th>姓名</th><th>身份证</th><th>民族</th><th>婚姻状况</th><th>与户主关系</th></tr>");
						$.each(list, function(i, n) {
							var row = list[i]
							$("#table-household").append("<tr><td>" + row.name + "</td><td>" + row.identityNumber + "</td><td>" + row.ethnicity + "</td><td>" + row.marriage + "</td><td>" + row.relHouseholder + "</td></tr>");
						});
						$('#code').multiselect({
							nonSelectedText: '未选择',
							updateButtonText: true,
							enableFiltering: true
						});
					}
				});

			}

			//文件打印
			function print(elementId) {
				var obj = document.getElementById(elementId);
				var newWindow = window.open("打印窗口", "_blank");
				newWindow.document.write("<table  border='1' cellpadding='5' style='border-collapse:collapse;font-size: 12px' >" + obj.innerHTML + "</table>");
				newWindow.document.close();
				newWindow.print();
				newWindow.close();
			}

			//excel文件导出
			var idTmr;

			function getExplorer() {
				var explorer = window.navigator.userAgent;
				//ie
				if(explorer.indexOf("MSIE") >= 0) {
					return 'ie';
				}
				//firefox
				else if(explorer.indexOf("Firefox") >= 0) {
					return 'Firefox';
				}
				//Chrome
				else if(explorer.indexOf("Chrome") >= 0) {
					return 'Chrome';
				}
				//Opera
				else if(explorer.indexOf("Opera") >= 0) {
					return 'Opera';
				}
				//Safari
				else if(explorer.indexOf("Safari") >= 0) {
					return 'Safari';
				}
			}

			function ExportExcel(tableid) { //整个表格拷贝到EXCEL中
				if(getExplorer() == 'ie') {
					var curTbl = document.getElementById(tableid);
					var oXL = new ActiveXObject("Excel.Application");

					//创建AX对象excel
					var oWB = oXL.Workbooks.Add();
					//获取workbook对象
					var xlsheet = oWB.Worksheets(1);
					//激活当前sheet
					var sel = document.body.createTextRange();
					sel.moveToElementText(curTbl);
					//把表格中的内容移到TextRange中
					sel.select;
					//全选TextRange中内容
					sel.execCommand("Copy");
					//复制TextRange中内容
					xlsheet.Paste();
					//粘贴到活动的EXCEL中
					oXL.Visible = true;
					//设置excel可见属性

					try {
						var fname = oXL.Application.GetSaveAsFilename("Excel.xls", "Excel Spreadsheets (*.xls), *.xls");
					} catch(e) {
						print("Nested catch caught " + e);
					} finally {
						oWB.SaveAs(fname);

						oWB.Close(savechanges = false);
						//xls.visible = false;
						oXL.Quit();
						oXL = null;
						//结束excel进程，退出完成
						//window.setInterval("Cleanup();",1);
						idTmr = window.setInterval("Cleanup();", 1);

					}

				} else {
					tableToExcel(tableid)
				}
			}

			function Cleanup() {
				window.clearInterval(idTmr);
				CollectGarbage();
			}

			var tableToExcel = (function() {
				var uri = 'data:application/vnd.ms-excel;base64,',
					template = '<html><head><meta charset="UTF-8"></head><body><table>{table}</table></body></html>',
					base64 = function(s) {
						return window.btoa(unescape(encodeURIComponent(s)))
					},
					format = function(s, c) {
						return s.replace(/{(\w+)}/g,
							function(m, p) {
								return c[p];
							})
					}
				return function(table, name) {
					if(!table.nodeType) table = document.getElementById(table)
					var ctx = {
						worksheet: name || 'Worksheet',
						table: table.innerHTML
					}
					window.location.href = uri + base64(format(template, ctx))
				}
			})()
			//--end-- excel文件
		</script>

	</body>

</html>